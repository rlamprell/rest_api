var buildHTTPRequest=function(){clearRequestInfo(),clearResponseInfo();var e=document.getElementById("method").value,t=document.getElementById("resource").value,n=document.getElementById("request").value;processRequest(e,t,n)},clearRequestInfo=function(){document.getElementById("thisRequest").innerHTML=null,document.getElementById("thisHost").innerHTML=null,document.getElementById("reqContent").innerHTML=null,document.getElementById("reqString").innerHTML=null},clearResponseInfo=function(){document.getElementById("httpStatus").innerHTML=null,document.getElementById("contentType").innerHTML=null,document.getElementById("responseBody").innerHTML=null,document.getElementById("responseLocation").innerHTML=null},processRequest=function(e,t,n){var s="https://student.csc.liv.ac.uk/~sgrlampr/v1",o=s+t;console.log("starting "+e+" request");var r=new XMLHttpRequest;r.onreadystatechange=function(){var s=200==this.status||201==this.status||204==this.status;if(4==this.readyState&&s){if(document.getElementById("thisRequest").innerHTML=e+" "+t+" "+this.getResponseHeader("Protocol"),document.getElementById("thisHost").innerHTML="Host: "+location.host,document.getElementById("httpStatus").innerHTML=this.getResponseHeader("Protocol")+" "+this.status+" "+this.statusText,"GET"==e){document.getElementById("contentType").innerHTML="Content-Type: "+this.getResponseHeader("Content-Type");var o=JSON.stringify(JSON.parse(this.response),null,2);document.getElementById("responseBody").innerHTML=o}else"POST"==e?(document.getElementById("reqContent").innerHTML="Content-Type: "+this.getResponseHeader("Content-Type"),document.getElementById("reqString").innerHTML=n,document.getElementById("responseLocation").innerHTML="Location: "+this.getResponseHeader("Location")):("PUT"==e||"PATCH"==e)&&(document.getElementById("reqContent").innerHTML="Content-Type: "+this.getResponseHeader("Content-Type"),document.getElementById("httpStatus").innerHTML=this.getResponseHeader("Protocol")+" "+this.status+" "+this.statusText);console.log(e+" request completed")}else 4!=this.readyState||s||(document.getElementById("thisRequest").innerHTML=e+" "+t+" "+this.getResponseHeader("Protocol"),document.getElementById("thisHost").innerHTML="Host: "+location.host,document.getElementById("httpStatus").innerHTML=this.getResponseHeader("Protocol")+" "+this.status+" "+this.statusText,"POST"==e?(document.getElementById("reqContent").innerHTML="Content-Type: "+this.getResponseHeader("Content-Type"),document.getElementById("reqString").innerHTML=n):("PUT"==e||"PATCH"==e)&&(document.getElementById("reqContent").innerHTML="Content-Type: "+this.getResponseHeader("Content-Type"),document.getElementById("httpStatus").innerHTML=this.getResponseHeader("Protocol")+" "+this.status+" "+this.statusText),console.log(e+" request completed"))},r.open(e,o,!0),r.setRequestHeader("Content-type","application/json"),r.send(n)};